submodule nokia-state-system-script-control {

    yang-version "1.1";

    belongs-to nokia-state { prefix "state"; }

    import ietf-yang-types                { prefix "yang"; }
    import nokia-sros-yang-extensions     { prefix "sros-ext"; }
    import nokia-types-sros               { prefix "types-sros"; }
    import nokia-types-system             { prefix "types-system"; }

    sros-ext:sros-major-release "rel23";
    organization "Nokia";
    contact
        "Nokia SR OS Support
         Web: <http://www.nokia.com>";
    description
        "Nokia YANG Data model with operational state for system scrip-control parameters on SR OS based routers.

         Copyright 2016 Nokia. All rights reserved. Reproduction of this document
         is authorized on the condition that the foregoing copyright notice is included.

         This nokia-state-system-script-control YANG module embodies Nokia's proprietary
         intellectual property. Nokia retains all title and ownership in the
         specification, including any revisions.

         Nokia grants all interested parties a non-exclusive license to use
         and distribute an unmodified copy of this specification in connection with
         management of Nokia products, and without fee, provided this
         copyright notice and license appear on all copies.

         This specification is supplied `as is', and Nokia makes no warranty,
         either express or implied, as to the use, operation, condition, or performance
         of the specification.";
    revision "2021-10-04";

    grouping state-system-script-control {
        ///nokia-state/state/system/script-control
        container script-control {
            description "Enable the script-control context";

            ///nokia-state/state/system/script-control/script
            list script {
                key "script-name owner";
                description "Enter the script list instance";

                ///nokia-state/state/system/script-control/script/script-name
                leaf script-name {
                    type types-sros:named-item;
                    description "Script name";
                }

                ///nokia-state/state/system/script-control/script/owner
                leaf owner {
                    type types-sros:named-item;
                    description "Script owner";
                }

                ///nokia-state/state/system/script-control/script/oper-state
                leaf oper-state {
                    type types-system:script-oper-state;
                    description
                        "The value of the this object indicates the operational
                         state of the accounting policy.";
                }

                ///nokia-state/state/system/script-control/script/last-script-error
                leaf last-script-error {
                    type string {
                        length "0..256";
                    }
                    description
                        "Descriptive error message if the transition into the oper-state
                         up failed.";
                }

            } // list script

            ///nokia-state/state/system/script-control/script-policy
            list script-policy {
                key "policy-name owner";
                description "Enter the script-policy list instance";

                ///nokia-state/state/system/script-control/script-policy/policy-name
                leaf policy-name {
                    type types-sros:named-item;
                    description "Script policy name";
                }

                ///nokia-state/state/system/script-control/script-policy/owner
                leaf owner {
                    type types-sros:named-item;
                    description "Script policy owner";
                }

                ///nokia-state/state/system/script-control/script-policy/oper-state
                leaf oper-state {
                    type types-system:script-policy-oper-state;
                    description
                        "The value of the this object indicates the operational
                         state of the accounting policy.";
                }

                ///nokia-state/state/system/script-control/script-policy/script-type
                choice script-type {
                    ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol
                    case scriptcontrol {

                        ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script
                        container script {
                            description "Enter the script context";

                            ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/script-start-error
                            leaf script-start-error {
                                type string {
                                    length "0..256";
                                }
                                description "Descriptive error message if an attempt to launch a script fails.";
                            }

                            ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/last-application
                            leaf last-application {
                                type types-system:script-auth-application;
                                description "Module that started this run of a script";
                            }

                            ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/last-auth-user-account
                            leaf last-auth-user-account {
                                type types-sros:named-item;
                                description
                                    "Name of the user account used to check access to CLI commands
                                     while executing the script.";
                            }

                            ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-histories
                            container run-histories {
                                description "Enter the run-histories context";

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-histories/completed
                                leaf completed {
                                    type uint32;
                                    description "Script's execution state";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-histories/executing
                                leaf executing {
                                    type uint32;
                                    description "Script's execution state";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-histories/initializing
                                leaf initializing {
                                    type uint32;
                                    description "Script's execution state";
                                }

                            } // container run-histories

                            ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history
                            list run-history {
                                key "run";
                                description "Enter the run-history list instance";

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/run
                                leaf run {
                                    type uint32;
                                    description "Identifier associated with this running or finished script";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/start-time
                                leaf start-time {
                                    type yang:date-and-time;
                                    description "The date and time when the execution started";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/end-time
                                leaf end-time {
                                    type yang:date-and-time;
                                    description "The date and time when the execution ended.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/elapsed-time
                                leaf elapsed-time {
                                    type types-sros:time-duration;
                                    description "Elapsed time of script";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/lifetime
                                leaf lifetime {
                                    type types-sros:time-duration;
                                    description "Specifies how long the script can execute";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/run-state
                                leaf run-state {
                                    type types-system:run-state;
                                    description "Script's execution state";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/run-exit-code
                                leaf run-exit-code {
                                    type types-system:run-exit-code;
                                    description "Reason why a script finished execution";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/result-time
                                leaf result-time {
                                    type yang:date-and-time;
                                    description
                                        "The date and time when the desired status of the script execution
                                         was updated.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/keep-history
                                leaf keep-history {
                                    type types-sros:time-duration;
                                    description
                                        "Specifies how long this leaf can exist in the run-table after
                                         the script has terminated.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/error-time
                                leaf error-time {
                                    type yang:date-and-time;
                                    description
                                        "The date and time when leaf error was last updated if the script
                                         startup or execution raised an abnormal condition.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/source-file
                                leaf source-file {
                                    type string {
                                        length "1..255";
                                    }
                                    description "File name where the script source is";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/results-file
                                leaf results-file {
                                    type string {
                                        length "1..511";
                                    }
                                    description "File name where the script result is written";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/run-exit
                                leaf run-exit {
                                    type string {
                                        length "1..511";
                                    }
                                    description "Status of the script execution";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/error
                                leaf error {
                                    type string;
                                    description
                                        "Descriptive error message if the script startup or execution
                                         raised an abnormal condition.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/application
                                leaf application {
                                    type types-system:script-auth-application;
                                    description "Module that started this run of a script";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/scriptcontrol/script/run-history/auth-user-account
                                leaf auth-user-account {
                                    type types-sros:named-item;
                                    description
                                        "Name of the user account used to check access to CLI commands
                                         while executing the script.";
                                }

                            } // list run-history

                        } // container script

                    }
                    ///nokia-state/state/system/script-control/script-policy/script-type/python3script
                    case python3script {

                        ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script
                        container python-script {
                            description "Enter the python-script context";

                            ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/script-start-error
                            leaf script-start-error {
                                type string {
                                    length "0..256";
                                }
                                description "Descriptive error message if an attempt to launch a script fails.";
                            }

                            ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/last-application
                            leaf last-application {
                                type types-system:script-auth-application;
                                description "Module that started this run of a script";
                            }

                            ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/last-auth-user-account
                            leaf last-auth-user-account {
                                type types-sros:named-item;
                                description
                                    "Name of the user account used to check access to CLI commands
                                     while executing the script.";
                            }

                            ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-histories
                            container run-histories {
                                description "Enter the run-histories context";

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-histories/completed
                                leaf completed {
                                    type uint32;
                                    description "Script's execution state";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-histories/executing
                                leaf executing {
                                    type uint32;
                                    description "Script's execution state";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-histories/initializing
                                leaf initializing {
                                    type uint32;
                                    description "Script's execution state";
                                }

                            } // container run-histories

                            ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history
                            list run-history {
                                key "run";
                                description "Enter the run-history list instance";

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/run
                                leaf run {
                                    type uint32;
                                    description "Identifier associated with this running or finished script";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/start-time
                                leaf start-time {
                                    type yang:date-and-time;
                                    description "The date and time when the execution started";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/end-time
                                leaf end-time {
                                    type yang:date-and-time;
                                    description "The date and time when the execution ended.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/elapsed-time
                                leaf elapsed-time {
                                    type types-sros:time-duration;
                                    description "Elapsed time of script";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/lifetime
                                leaf lifetime {
                                    type types-sros:time-duration;
                                    description "Specifies how long the script can execute";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/run-state
                                leaf run-state {
                                    type types-system:run-state;
                                    description "Script's execution state";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/run-exit-code
                                leaf run-exit-code {
                                    type types-system:run-exit-code;
                                    description "Reason why a script finished execution";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/result-time
                                leaf result-time {
                                    type yang:date-and-time;
                                    description
                                        "The date and time when the desired status of the script execution
                                         was updated.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/keep-history
                                leaf keep-history {
                                    type types-sros:time-duration;
                                    description
                                        "Specifies how long this leaf can exist in the run-table after
                                         the script has terminated.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/error-time
                                leaf error-time {
                                    type yang:date-and-time;
                                    description
                                        "The date and time when leaf error was last updated if the script
                                         startup or execution raised an abnormal condition.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/source-file
                                leaf source-file {
                                    type string {
                                        length "1..255";
                                    }
                                    description "File name where the script source is";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/results-file
                                leaf results-file {
                                    type string {
                                        length "1..511";
                                    }
                                    description "File name where the script result is written";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/run-exit
                                leaf run-exit {
                                    type string {
                                        length "1..511";
                                    }
                                    description "Status of the script execution";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/error
                                leaf error {
                                    type string;
                                    description
                                        "Descriptive error message if the script startup or execution
                                         raised an abnormal condition.";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/application
                                leaf application {
                                    type types-system:script-auth-application;
                                    description "Module that started this run of a script";
                                }

                                ///nokia-state/state/system/script-control/script-policy/script-type/python3script/python-script/run-history/auth-user-account
                                leaf auth-user-account {
                                    type types-sros:named-item;
                                    description
                                        "Name of the user account used to check access to CLI commands
                                         while executing the script.";
                                }

                            } // list run-history

                        } // container python-script

                    }
                }
            } // list script-policy

        } // container script-control

    } // grouping state-system-script-control

}
