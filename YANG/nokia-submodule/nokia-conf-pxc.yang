submodule nokia-conf-pxc {

    yang-version "1.1";

    belongs-to nokia-conf { prefix "conf"; }

    import nokia-sros-yang-extensions     { prefix "sros-ext"; }
    import nokia-types-services           { prefix "types-services"; }
    import nokia-types-sros               { prefix "types-sros"; }

    include nokia-conf-groups;
    include nokia-conf-lag;
    include nokia-conf-port;
    include nokia-conf-qos;

    sros-ext:sros-major-release "rel23";
    organization "Nokia";
    contact
        "Nokia SR OS Support
         Web: <http://www.nokia.com>";
    description
        "Nokia YANG Data model to configure ports cross connects (PXC) on SR OS based routers.

         Copyright 2016 Nokia. All rights reserved. Reproduction of this document
         is authorized on the condition that the foregoing copyright notice is included.

         This nokia-conf-pxc YANG module embodies Nokia's proprietary
         intellectual property. Nokia retains all title and ownership in the
         specification, including any revisions.

         Nokia grants all interested parties a non-exclusive license to use
         and distribute an unmodified copy of this specification in connection with
         management of Nokia products, and without fee, provided this
         copyright notice and license appear on all copies.

         This specification is supplied `as is', and Nokia makes no warranty,
         either express or implied, as to the use, operation, condition, or performance
         of the specification.";
    revision "2023-04-18";

    grouping conf-pxc-port-xc {
        ///nokia-conf/configure/port-xc
        container port-xc {
            description "Enable the port-xc context";

            ///nokia-conf/configure/port-xc/apply-groups
            leaf-list apply-groups {
                type leafref {
                    path "../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Apply a configuration group at this level";
            }

            ///nokia-conf/configure/port-xc/apply-groups-exclude
            leaf-list apply-groups-exclude {
                type leafref {
                    path "../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Exclude a configuration group at this level";
            }

            ///nokia-conf/configure/port-xc/pxc
            list pxc {
                key "pxc-id";
                description "Enter the pxc list instance";

                ///nokia-conf/configure/port-xc/pxc/pxc-id
                leaf pxc-id {
                    type uint32 {
                        range "1..256";
                    }
                    description "PXC ID";
                }

                ///nokia-conf/configure/port-xc/pxc/admin-state
                leaf admin-state {
                    type types-sros:admin-state;
                    default "disable";
                    description "Administrative state of the PXC";
                }

                ///nokia-conf/configure/port-xc/pxc/description
                leaf description {
                    type types-sros:description;
                    description "Text description";
                }

                ///nokia-conf/configure/port-xc/pxc/port-id
                leaf port-id {
                    type leafref {
                        path "../../../port/port-id";
                    }
                    sros-ext:immutable;
                    description "PXC port ID";
                }

                ///nokia-conf/configure/port-xc/pxc/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/port-xc/pxc/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

            } // list pxc

        } // container port-xc

    } // grouping conf-pxc-port-xc

    grouping conf-pxc-fwd-path-ext {
        ///nokia-conf/configure/fwd-path-ext
        container fwd-path-ext {
            description "Enter the fwd-path-ext context";

            ///nokia-conf/configure/fwd-path-ext/apply-groups
            leaf-list apply-groups {
                type leafref {
                    path "../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Apply a configuration group at this level";
            }

            ///nokia-conf/configure/fwd-path-ext/apply-groups-exclude
            leaf-list apply-groups-exclude {
                type leafref {
                    path "../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Exclude a configuration group at this level";
            }

            ///nokia-conf/configure/fwd-path-ext/sdp-id-range
            container sdp-id-range {
                presence "Enable the sdp-id-range context";
                description "Enable the sdp-id-range context";

                ///nokia-conf/configure/fwd-path-ext/sdp-id-range/start
                leaf start {
                    type types-services:sdp-id;
                    mandatory true;
                    description "Lower bound of the SDP ID range";
                }

                ///nokia-conf/configure/fwd-path-ext/sdp-id-range/end
                leaf end {
                    type types-services:sdp-id;
                    mandatory true;
                    description "Upper bound of the SDP ID range";
                }

                ///nokia-conf/configure/fwd-path-ext/sdp-id-range/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/fwd-path-ext/sdp-id-range/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

            } // container sdp-id-range

            ///nokia-conf/configure/fwd-path-ext/fpe
            list fpe {
                key "fpe-id";
                description "Enter the fpe list instance";

                ///nokia-conf/configure/fwd-path-ext/fpe/fpe-id
                leaf fpe-id {
                    type uint32 {
                        range "1..64";
                    }
                    description "FPE ID";
                }

                ///nokia-conf/configure/fwd-path-ext/fpe/description
                leaf description {
                    type types-sros:description;
                    description "Text description";
                }

                ///nokia-conf/configure/fwd-path-ext/fpe/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/fwd-path-ext/fpe/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

                ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type
                choice fpe-path-type {
                    ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/single-path
                    case single-path {

                        ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/single-path/path
                        container path {
                            description "Enter the path context";

                            ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/single-path/path/path-type
                            choice path-type {
                                ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/single-path/path/path-type/port-xc
                                case port-xc {

                                    ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/single-path/path/path-type/port-xc/pxc
                                    leaf pxc {
                                        type leafref {
                                            path "../../../../port-xc/pxc/pxc-id";
                                        }
                                        description "Dedicated PXC ID used by the FPE path";
                                    }

                                }
                                ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/single-path/path/path-type/lag
                                case lag {

                                    ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/single-path/path/path-type/lag/xc-lag-a
                                    leaf xc-lag-a {
                                        type leafref {
                                            path "../../../../lag/lag-name";
                                        }
                                        description "PXC LAG identifier dedicated to the FPE path";
                                    }

                                    ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/single-path/path/path-type/lag/xc-lag-b
                                    leaf xc-lag-b {
                                        type leafref {
                                            path "../../../../lag/lag-name";
                                        }
                                        description "PXC LAG identifier dedicated to the FPE path";
                                    }

                                }
                            }
                        } // container path

                    }
                    ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path
                    case multi-path {

                        ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path
                        container multi-path {
                            presence "Enable the multi-path context";
                            description "Enable the multi-path context";

                            ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path
                            list path {
                                key "path-id";
                                description "Enter the path list instance";

                                ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/path-id
                                leaf path-id {
                                    type uint32 {
                                        range "1..64";
                                    }
                                    description "Multipath FPE forwarding path ID";
                                }

                                ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/apply-groups
                                leaf-list apply-groups {
                                    type leafref {
                                        path "../../../../../groups/group/name";
                                    }
                                    max-elements 8;
                                    ordered-by user;
                                    description "Apply a configuration group at this level";
                                }

                                ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/apply-groups-exclude
                                leaf-list apply-groups-exclude {
                                    type leafref {
                                        path "../../../../../groups/group/name";
                                    }
                                    max-elements 8;
                                    ordered-by user;
                                    description "Exclude a configuration group at this level";
                                }

                                ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/path-type
                                choice path-type {
                                    ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/path-type/port-xc
                                    case port-xc {

                                        ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/path-type/port-xc/pxc
                                        leaf pxc {
                                            type leafref {
                                                path "../../../../../port-xc/pxc/pxc-id";
                                            }
                                            description "Dedicated PXC ID used by the FPE path";
                                        }

                                    }
                                    ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/path-type/lag
                                    case lag {

                                        ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/path-type/lag/xc-lag-a
                                        leaf xc-lag-a {
                                            type leafref {
                                                path "../../../../../lag/lag-name";
                                            }
                                            description "PXC LAG identifier dedicated to the FPE path";
                                        }

                                        ///nokia-conf/configure/fwd-path-ext/fpe/fpe-path-type/multi-path/multi-path/path/path-type/lag/xc-lag-b
                                        leaf xc-lag-b {
                                            type leafref {
                                                path "../../../../../lag/lag-name";
                                            }
                                            description "PXC LAG identifier dedicated to the FPE path";
                                        }

                                    }
                                }
                            } // list path

                        } // container multi-path

                    }
                }
                ///nokia-conf/configure/fwd-path-ext/fpe/application
                container application {
                    description "Enter the application context";

                    ///nokia-conf/configure/fwd-path-ext/fpe/application/pw-port
                    leaf pw-port {
                        status obsolete;
                        type boolean;
                        default "false";
                        description "Use FPE to set up FPE PW cross-connect";
                    }

                    ///nokia-conf/configure/fwd-path-ext/fpe/application/sub-mgmt-extension
                    leaf sub-mgmt-extension {
                        type boolean;
                        default "false";
                        description "Enable FPE for subscrber management extensions";
                    }

                    ///nokia-conf/configure/fwd-path-ext/fpe/application/pw-port-extension
                    container pw-port-extension {
                        presence "Enable the pw-port-extension context";
                        description "Enable the pw-port-extension context";

                        ///nokia-conf/configure/fwd-path-ext/fpe/application/pw-port-extension/interface-a
                        container interface-a {
                            description "Enter the interface-a context";

                            ///nokia-conf/configure/fwd-path-ext/fpe/application/pw-port-extension/interface-a/qos
                            container qos {
                                description "Enter the qos context";

                                ///nokia-conf/configure/fwd-path-ext/fpe/application/pw-port-extension/interface-a/qos/network-policy
                                leaf network-policy {
                                    type leafref {
                                        path "../../../../../../../qos/network/network-policy-name";
                                    }
                                    description "Network QoS policy applied to the FPE interface";
                                }

                            } // container qos

                        } // container interface-a

                        ///nokia-conf/configure/fwd-path-ext/fpe/application/pw-port-extension/interface-b
                        container interface-b {
                            description "Enter the interface-b context";

                            ///nokia-conf/configure/fwd-path-ext/fpe/application/pw-port-extension/interface-b/qos
                            container qos {
                                description "Enter the qos context";

                                ///nokia-conf/configure/fwd-path-ext/fpe/application/pw-port-extension/interface-b/qos/network-policy
                                leaf network-policy {
                                    type leafref {
                                        path "../../../../../../../qos/network/network-policy-name";
                                    }
                                    description "Network QoS policy applied to the FPE interface";
                                }

                            } // container qos

                        } // container interface-b

                    } // container pw-port-extension

                    ///nokia-conf/configure/fwd-path-ext/fpe/application/vxlan-termination
                    container vxlan-termination {
                        status obsolete;
                        presence "Enable the vxlan-termination context";
                        description "Enable the vxlan-termination context";

                        ///nokia-conf/configure/fwd-path-ext/fpe/application/vxlan-termination/router-instance
                        leaf router-instance {
                            status obsolete;
                            type string;
                            default "Base";
                            description "Router name or VPRN service name";
                        }

                    } // container vxlan-termination

                    ///nokia-conf/configure/fwd-path-ext/fpe/application/vxlan
                    container vxlan {
                        presence "Enable the vxlan context";
                        description "Enable the vxlan context";

                        ///nokia-conf/configure/fwd-path-ext/fpe/application/vxlan/router-instance
                        leaf router-instance {
                            type string;
                            default "Base";
                            description "Router instance for VXLAN termination";
                        }



                    } // container vxlan

                    ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6
                    container srv6 {
                        presence "Enable the srv6 context";
                        description "Enable the srv6 context";

                        ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6/type
                        leaf type {
                            type enumeration {
                                enum origination                    { value 1; }
                                enum termination                    { value 2; }
                            }
                            description "SRv6 FPE application type";
                        }

                        ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6/interface-a
                        container interface-a {
                            description "Enter the interface-a context";

                            ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6/interface-a/qos
                            container qos {
                                description "Enter the qos context";

                                ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6/interface-a/qos/network-policy
                                leaf network-policy {
                                    type leafref {
                                        path "../../../../../../../qos/network/network-policy-name";
                                    }
                                    description "Network QoS policy applied to the FPE interface";
                                }

                            } // container qos

                        } // container interface-a

                        ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6/interface-b
                        container interface-b {
                            description "Enter the interface-b context";

                            ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6/interface-b/mtu
                            leaf mtu {
                                type uint32 {
                                    range "0 | 1280..9786";
                                }
                                description "MTU size of SRv6 origination FPE interface-b";
                            }

                            ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6/interface-b/qos
                            container qos {
                                description "Enter the qos context";

                                ///nokia-conf/configure/fwd-path-ext/fpe/application/srv6/interface-b/qos/network-policy
                                leaf network-policy {
                                    type leafref {
                                        path "../../../../../../../qos/network/network-policy-name";
                                    }
                                    description "Network QoS policy applied to the FPE interface";
                                }

                            } // container qos

                        } // container interface-b

                    } // container srv6

                } // container application

            } // list fpe

        } // container fwd-path-ext

    } // grouping conf-pxc-fwd-path-ext

}
