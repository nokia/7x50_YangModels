submodule nokia-conf-eth-cfm {

    yang-version "1.1";

    belongs-to nokia-conf { prefix "conf"; }

    import nokia-sros-yang-extensions     { prefix "sros-ext"; }
    import nokia-types-eth-cfm            { prefix "types-eth-cfm"; }
    import nokia-types-services           { prefix "types-services"; }
    import nokia-types-sros               { prefix "types-sros"; }

    include nokia-conf-groups;

    sros-ext:sros-major-release "rel23";
    organization "Nokia";
    contact
        "Nokia SR OS Support
         Web: <http://www.nokia.com>";
    description
        "Nokia YANG Data model to configure eth-cfm on SR OS based routers.

         Copyright 2016 Nokia. All rights reserved. Reproduction of this document
         is authorized on the condition that the foregoing copyright notice is included.

         This nokia-conf-eth-cfm YANG module embodies Nokia's proprietary
         intellectual property. Nokia retains all title and ownership in the
         specification, including any revisions.

         Nokia grants all interested parties a non-exclusive license to use
         and distribute an unmodified copy of this specification in connection with
         management of Nokia products, and without fee, provided this
         copyright notice and license appear on all copies.

         This specification is supplied `as is', and Nokia makes no warranty,
         either express or implied, as to the use, operation, condition, or performance
         of the specification.";
    revision "2023-03-29";

    grouping conf-eth-cfm {
        ///nokia-conf/configure/eth-cfm
        container eth-cfm {
            description "Enable the eth-cfm context";

            ///nokia-conf/configure/eth-cfm/apply-groups
            leaf-list apply-groups {
                type leafref {
                    path "../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Apply a configuration group at this level";
            }

            ///nokia-conf/configure/eth-cfm/apply-groups-exclude
            leaf-list apply-groups-exclude {
                type leafref {
                    path "../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Exclude a configuration group at this level";
            }

            ///nokia-conf/configure/eth-cfm/default-domain
            container default-domain {
                description "Enable the default-domain context";

                ///nokia-conf/configure/eth-cfm/default-domain/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/eth-cfm/default-domain/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

                ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier
                list bridge-identifier {
                    key "bridge-name vlan";
                    description "Enter the bridge-identifier list instance";

                    ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/bridge-name
                    leaf bridge-name {
                        type types-services:service-name;
                        description "Bridge name in the default domain table";
                    }

                    ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/vlan
                    leaf vlan {
                        type types-eth-cfm:vlan-id-or-none;
                        description "VLAN ID for the default domain";
                    }

                    ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/id-permission
                    leaf id-permission {
                        type enumeration {
                            enum none                           { value 1; }
                            enum chassis                        { value 2; }
                            enum defer                          { value 5; }
                        }
                        default "defer";
                        description "Strategy for the inclusion of Sender ID TLV information";
                    }

                    ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/mip-ltr-priority
                    leaf mip-ltr-priority {
                        type union {
                            type types-eth-cfm:frame-priority;
                            type enumeration {
                                enum defer                          { value -1; }
                            }
                        }
                        default "defer";
                        description "Priority of the Linktrace Response";
                    }

                    ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/apply-groups
                    leaf-list apply-groups {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Apply a configuration group at this level";
                    }

                    ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/apply-groups-exclude
                    leaf-list apply-groups-exclude {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Exclude a configuration group at this level";
                    }

                    ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/mhf-creation
                    container mhf-creation {
                        description "Enter the mhf-creation context";

                        ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/mhf-creation/mhf-type
                        leaf mhf-type {
                            type types-eth-cfm:mhf-creation-type;
                            default "defer";
                            description "MIP creation mode";
                        }

                        ///nokia-conf/configure/eth-cfm/default-domain/bridge-identifier/mhf-creation/level
                        leaf level {
                            type types-eth-cfm:mhf-creation-level-type;
                            default "defer";
                            description "Requested level of the MIP";
                        }

                    } // container mhf-creation

                } // list bridge-identifier

            } // container default-domain

            ///nokia-conf/configure/eth-cfm/domain
            list domain {
                key "md-admin-name";
                description "Enter the domain list instance";

                ///nokia-conf/configure/eth-cfm/domain/md-admin-name
                leaf md-admin-name {
                    type types-eth-cfm:admin-name;
                    description "Unique domain name";
                }

                ///nokia-conf/configure/eth-cfm/domain/level
                leaf level {
                    type types-eth-cfm:mp-level;
                    sros-ext:immutable;
                    mandatory true;
                    description "Maintenance Domain Level (MD Level)";
                }

                ///nokia-conf/configure/eth-cfm/domain/md-index
                leaf md-index {
                    type uint32 {
                        range "1..max";
                    }
                    sros-ext:immutable;
                    description "The index of the Maintenance Domain (MD)";
                }

                ///nokia-conf/configure/eth-cfm/domain/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/eth-cfm/domain/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

                ///nokia-conf/configure/eth-cfm/domain/md-name
                choice md-name {
                    mandatory true;
                    ///nokia-conf/configure/eth-cfm/domain/md-name/dns
                    case dns {

                        ///nokia-conf/configure/eth-cfm/domain/md-name/dns/dns
                        leaf dns {
                            type string {
                                length "1..43";
                            }
                            sros-ext:immutable;
                            description "Domain name like text string derived from a DNS name";
                        }

                    }
                    ///nokia-conf/configure/eth-cfm/domain/md-name/mac
                    case mac {

                        ///nokia-conf/configure/eth-cfm/domain/md-name/mac/mac
                        leaf mac {
                            type string {
                                length "13..23";
                                pattern "[0-9a-fA-F]{1,2}(:[0-9a-fA-F]{1,2}){5}-[0-9]{1,5}";
                            }
                            sros-ext:immutable;
                            description "Maintenance domain MAC name";
                        }

                    }
                    ///nokia-conf/configure/eth-cfm/domain/md-name/name
                    case name {

                        ///nokia-conf/configure/eth-cfm/domain/md-name/name/name
                        leaf name {
                            type string {
                                length "1..43";
                            }
                            sros-ext:immutable;
                            description "Maintenance Domain name";
                        }

                    }
                    ///nokia-conf/configure/eth-cfm/domain/md-name/format
                    case format {

                        ///nokia-conf/configure/eth-cfm/domain/md-name/format/format
                        leaf format {
                            type enumeration {
                                enum none                           { value 0; }
                            }
                            sros-ext:immutable;
                            description "Maintenance domain name not to be provided";
                        }

                    }
                }
                ///nokia-conf/configure/eth-cfm/domain/association
                list association {
                    key "ma-admin-name";
                    description "Enter the association list instance";

                    ///nokia-conf/configure/eth-cfm/domain/association/ma-admin-name
                    leaf ma-admin-name {
                        type types-eth-cfm:admin-name;
                        description "Domain association name";
                    }

                    ///nokia-conf/configure/eth-cfm/domain/association/ma-index
                    leaf ma-index {
                        type uint32 {
                            range "1..max";
                        }
                        sros-ext:immutable;
                        description "Maintenance Association (MA) table index";
                    }

                    ///nokia-conf/configure/eth-cfm/domain/association/ccm-interval
                    leaf ccm-interval {
                        type types-eth-cfm:ccm-interval-type;
                        description "CCM transmission interval for all MEPs in association";
                    }

                    ///nokia-conf/configure/eth-cfm/domain/association/auto-mep-discovery
                    leaf auto-mep-discovery {
                        type boolean;
                        default "false";
                        description "Allow remote MEP automatic discovery";
                    }

                    ///nokia-conf/configure/eth-cfm/domain/association/facility-id-permission
                    leaf facility-id-permission {
                        type types-eth-cfm:facility-id-permission-type;
                        default "none";
                        description "Sender ID TLV information for facility base MEPs";
                    }

                    ///nokia-conf/configure/eth-cfm/domain/association/apply-groups
                    leaf-list apply-groups {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Apply a configuration group at this level";
                    }

                    ///nokia-conf/configure/eth-cfm/domain/association/apply-groups-exclude
                    leaf-list apply-groups-exclude {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Exclude a configuration group at this level";
                    }

                    ///nokia-conf/configure/eth-cfm/domain/association/ma-name
                    choice ma-name {
                        mandatory true;
                        description
                            "The Maintenance Domain Association name

                             It is the part of the Maintenance Association Identifier
                             which is unique within the Maintenance Domain Name and is
                             appended to the Maintenance Domain Name to form the
                             Maintenance Association Identifier (MAID).";
                        ///nokia-conf/configure/eth-cfm/domain/association/ma-name/icc-based
                        case icc-based {

                            ///nokia-conf/configure/eth-cfm/domain/association/ma-name/icc-based/icc-based
                            leaf icc-based {
                                type string {
                                    length "8..13";
                                }
                                sros-ext:immutable;
                                description "Maintenance Association name in ICC-based format";
                            }

                        }
                        ///nokia-conf/configure/eth-cfm/domain/association/ma-name/integer
                        case integer {

                            ///nokia-conf/configure/eth-cfm/domain/association/ma-name/integer/integer
                            leaf integer {
                                type uint32 {
                                    range "0..65535";
                                }
                                sros-ext:immutable;
                                description "Maintenance Association name in integer format";
                            }

                        }
                        ///nokia-conf/configure/eth-cfm/domain/association/ma-name/string
                        case string {

                            ///nokia-conf/configure/eth-cfm/domain/association/ma-name/string/string
                            leaf string {
                                type string {
                                    length "1..45";
                                }
                                sros-ext:immutable;
                                description "Maintenance Association name in raw ASCII string format";
                            }

                        }
                        ///nokia-conf/configure/eth-cfm/domain/association/ma-name/vid
                        case vid {

                            ///nokia-conf/configure/eth-cfm/domain/association/ma-name/vid/vid
                            leaf vid {
                                type uint32 {
                                    range "0..4094";
                                }
                                sros-ext:immutable;
                                description "Primary VLAN ID for the Maintenance Association name";
                            }

                        }
                        ///nokia-conf/configure/eth-cfm/domain/association/ma-name/vpn-id
                        case vpn-id {

                            ///nokia-conf/configure/eth-cfm/domain/association/ma-name/vpn-id/vpn-id
                            leaf vpn-id {
                                type string {
                                    length "0..15";
                                    pattern "[0-9A-F]{6}(:[0-9A-F]{8})";
                                }
                                sros-ext:immutable;
                                description "VPN ID for the Maintenance Association name";
                            }

                        }
                    }
                    ///nokia-conf/configure/eth-cfm/domain/association/ccm-hold-time
                    container ccm-hold-time {
                        description "Enter the ccm-hold-time context";

                        ///nokia-conf/configure/eth-cfm/domain/association/ccm-hold-time/down
                        leaf down {
                            when "../../ccm-interval = '10ms' or ../../ccm-interval = '100ms'" {
                                description "ccm-interval must be set to either 10ms or 100ms to access ccm-hold-time";
                            }
                            type uint32 {
                                range "1..1000";
                            }
                            units "centiseconds";
                            description "Additional time before a MEP declares a fault, in CCM timeout conditions";
                        }

                    } // container ccm-hold-time

                    ///nokia-conf/configure/eth-cfm/domain/association/bridge-identifier
                    list bridge-identifier {
                        key "bridge-name";
                        max-elements 1;
                        description "Enter the bridge-identifier list instance";

                        ///nokia-conf/configure/eth-cfm/domain/association/bridge-identifier/bridge-name
                        leaf bridge-name {
                            type types-services:service-name;
                            description "Bridge name that links to the service";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/bridge-identifier/vlan
                        leaf vlan {
                            type int32 {
                                range "1..4094";
                            }
                            description "VLAN ID for the default domain index";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/bridge-identifier/mhf-creation
                        leaf mhf-creation {
                            type types-eth-cfm:tmnx-mhf-creation-type;
                            default "none";
                            description "MIP method of creation";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/bridge-identifier/id-permission
                        leaf id-permission {
                            type types-eth-cfm:facility-id-permission-type;
                            default "none";
                            description "Strategy for the inclusion of Sender ID TLV information";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/bridge-identifier/mip-ltr-priority
                        leaf mip-ltr-priority {
                            type types-eth-cfm:frame-priority;
                            default "7";
                            description "Priority of the Linktrace Response Message (ETH-LTR) from a MIP";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/bridge-identifier/apply-groups
                        leaf-list apply-groups {
                            type leafref {
                                path "../../../../../groups/group/name";
                            }
                            max-elements 8;
                            ordered-by user;
                            description "Apply a configuration group at this level";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/bridge-identifier/apply-groups-exclude
                        leaf-list apply-groups-exclude {
                            type leafref {
                                path "../../../../../groups/group/name";
                            }
                            max-elements 8;
                            ordered-by user;
                            description "Exclude a configuration group at this level";
                        }

                    } // list bridge-identifier

                    ///nokia-conf/configure/eth-cfm/domain/association/remote-mep
                    list remote-mep {
                        key "mep-id";
                        description "Enter the remote-mep list instance";

                        ///nokia-conf/configure/eth-cfm/domain/association/remote-mep/mep-id
                        leaf mep-id {
                            type types-eth-cfm:mep-id-type;
                            description "Remote MEP ID";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/remote-mep/remote-mac
                        leaf remote-mac {
                            type types-sros:mac-unicast-address-no-zero;
                            description "Remote MAC Address for transmitting CFM packets to remote MEPs";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/remote-mep/apply-groups
                        leaf-list apply-groups {
                            type leafref {
                                path "../../../../../groups/group/name";
                            }
                            max-elements 8;
                            ordered-by user;
                            description "Apply a configuration group at this level";
                        }

                        ///nokia-conf/configure/eth-cfm/domain/association/remote-mep/apply-groups-exclude
                        leaf-list apply-groups-exclude {
                            type leafref {
                                path "../../../../../groups/group/name";
                            }
                            max-elements 8;
                            ordered-by user;
                            description "Exclude a configuration group at this level";
                        }

                    } // list remote-mep

                } // list association

            } // list domain

        } // container eth-cfm

    } // grouping conf-eth-cfm

}
