submodule nokia-conf-filter-dhcp {

    yang-version "1.1";

    belongs-to nokia-conf { prefix "conf"; }

    import nokia-sros-yang-extensions     { prefix "sros-ext"; }
    import nokia-types-sros               { prefix "types-sros"; }

    include nokia-conf-groups;

    sros-ext:sros-major-release "rel23";
    organization "Nokia";
    contact
        "Nokia SR OS Support
         Web: <http://www.nokia.com>";
    description
        "Nokia YANG Data model to configure CPM software based DHCP filters on SR OS based routers.

         Copyright 2016 Nokia. All rights reserved. Reproduction of this document
         is authorized on the condition that the foregoing copyright notice is included.

         This nokia-conf-filter-dhcp YANG module embodies Nokia's proprietary
         intellectual property. Nokia retains all title and ownership in the
         specification, including any revisions.

         Nokia grants all interested parties a non-exclusive license to use
         and distribute an unmodified copy of this specification in connection with
         management of Nokia products, and without fee, provided this
         copyright notice and license appear on all copies.

         This specification is supplied `as is', and Nokia makes no warranty,
         either express or implied, as to the use, operation, condition, or performance
         of the specification.";
    revision "2020-12-07";

    grouping conf-filter-dhcp-dhcp-filter {
        ///nokia-conf/configure/filter/dhcp-filter
        list dhcp-filter {
            key "filter-id";
            description "Enter the dhcp-filter list instance";

            ///nokia-conf/configure/filter/dhcp-filter/filter-id
            leaf filter-id {
                type uint32 {
                    range "1..65535";
                }
                description "Unique DHCP filter policy ID";
            }

            ///nokia-conf/configure/filter/dhcp-filter/description
            leaf description {
                type types-sros:description;
                description "Text description";
            }

            ///nokia-conf/configure/filter/dhcp-filter/apply-groups
            leaf-list apply-groups {
                type leafref {
                    path "../../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Apply a configuration group at this level";
            }

            ///nokia-conf/configure/filter/dhcp-filter/apply-groups-exclude
            leaf-list apply-groups-exclude {
                type leafref {
                    path "../../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Exclude a configuration group at this level";
            }

            ///nokia-conf/configure/filter/dhcp-filter/default-action
            container default-action {
                presence "Enable the default-action context";
                description "Enable the default-action context";

                ///nokia-conf/configure/filter/dhcp-filter/default-action/action
                choice action {
                    mandatory true;
                    description
                        "The action to take for DHCP host creation requests that match this
                         filter entry. If not set host creation proceeds as usual";
                    ///nokia-conf/configure/filter/dhcp-filter/default-action/action/bypass-host-creation
                    case bypass-host-creation {

                        ///nokia-conf/configure/filter/dhcp-filter/default-action/action/bypass-host-creation/bypass-host-creation
                        leaf bypass-host-creation {
                            type empty;
                            description "Host creation options to bypass";
                        }

                    }
                    ///nokia-conf/configure/filter/dhcp-filter/default-action/action/drop
                    case drop {

                        ///nokia-conf/configure/filter/dhcp-filter/default-action/action/drop/drop
                        leaf drop {
                            type empty;
                            description "DHCP host creation when the filter entry is matched";
                        }

                    }
                }
            } // container default-action

            ///nokia-conf/configure/filter/dhcp-filter/entry
            list entry {
                key "entry-id";
                max-elements 10;
                description "Enter the entry list instance";

                ///nokia-conf/configure/filter/dhcp-filter/entry/entry-id
                leaf entry-id {
                    type uint32 {
                        range "1..65535";
                    }
                    description "DHCP filter entry ID";
                }

                ///nokia-conf/configure/filter/dhcp-filter/entry/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/filter/dhcp-filter/entry/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

                ///nokia-conf/configure/filter/dhcp-filter/entry/action
                container action {
                    presence "Enable the action context";
                    description "Enable the action context";

                    ///nokia-conf/configure/filter/dhcp-filter/entry/action/action
                    choice action {
                        mandatory true;
                        description
                            "The action to take for DHCP host creation requests that match this
                             filter entry. If not set host creation proceeds as usual";
                        ///nokia-conf/configure/filter/dhcp-filter/entry/action/action/bypass-host-creation
                        case bypass-host-creation {

                            ///nokia-conf/configure/filter/dhcp-filter/entry/action/action/bypass-host-creation/bypass-host-creation
                            leaf bypass-host-creation {
                                type empty;
                                description "Host creation options to bypass";
                            }

                        }
                        ///nokia-conf/configure/filter/dhcp-filter/entry/action/action/drop
                        case drop {

                            ///nokia-conf/configure/filter/dhcp-filter/entry/action/action/drop/drop
                            leaf drop {
                                type empty;
                                description "DHCP host creation when the filter entry is matched";
                            }

                        }
                    }
                } // container action

                ///nokia-conf/configure/filter/dhcp-filter/entry/option
                container option {
                    presence "Enable the option context";
                    description "Enable the option context";

                    ///nokia-conf/configure/filter/dhcp-filter/entry/option/number
                    leaf number {
                        type int32 {
                            range "0..255";
                        }
                        mandatory true;
                        description "Number for DHCP or DHCPv6 option to filter on";
                    }

                    ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match
                    choice option-match {
                        mandatory true;
                        ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/present
                        case present {

                            ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/present/present
                            leaf present {
                                type empty;
                                description "Require the presence of related option";
                            }

                        }
                        ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/absent
                        case absent {

                            ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/absent/absent
                            leaf absent {
                                type empty;
                                description "Require the absence of related option";
                            }

                        }
                        ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match
                        case match {

                            ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match/match
                            container match {
                                presence "Enable the match context";
                                description "Enable the match context";

                                ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match/match/exact
                                leaf exact {
                                    type boolean;
                                    default "false";
                                    description "Use an exact match pattern (not partial)";
                                }

                                ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match/match/invert
                                leaf invert {
                                    type boolean;
                                    default "false";
                                    description "Invert (partial) matching criteria";
                                }

                                ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match/match/option-value
                                choice option-value {
                                    mandatory true;
                                    ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match/match/option-value/string
                                    case string {

                                        ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match/match/option-value/string/string
                                        leaf string {
                                            type string {
                                                length "1..127";
                                            }
                                            description "Matching pattern for the filtered option";
                                        }

                                    }
                                    ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match/match/option-value/hex
                                    case hex {

                                        ///nokia-conf/configure/filter/dhcp-filter/entry/option/option-match/match/match/option-value/hex/hex
                                        leaf hex {
                                            type string {
                                                length "1..256";
                                                pattern "0x[0-9a-fA-F]+";
                                            }
                                            description "Matching pattern for the filtered option";
                                        }

                                    }
                                }
                            } // container match

                        }
                    }
                } // container option

            } // list entry

        } // list dhcp-filter

    } // grouping conf-filter-dhcp-dhcp-filter

    grouping conf-filter-dhcp-dhcp6-filter {
        ///nokia-conf/configure/filter/dhcp6-filter
        list dhcp6-filter {
            key "filter-id";
            description "Enter the dhcp6-filter list instance";

            ///nokia-conf/configure/filter/dhcp6-filter/filter-id
            leaf filter-id {
                type uint32 {
                    range "1..65535";
                }
                description "Unique DHCP filter policy ID";
            }

            ///nokia-conf/configure/filter/dhcp6-filter/description
            leaf description {
                type types-sros:description;
                description "Text description";
            }

            ///nokia-conf/configure/filter/dhcp6-filter/apply-groups
            leaf-list apply-groups {
                type leafref {
                    path "../../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Apply a configuration group at this level";
            }

            ///nokia-conf/configure/filter/dhcp6-filter/apply-groups-exclude
            leaf-list apply-groups-exclude {
                type leafref {
                    path "../../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Exclude a configuration group at this level";
            }

            ///nokia-conf/configure/filter/dhcp6-filter/default-action
            container default-action {
                presence "Enable the default-action context";
                description "Enable the default-action context";

                ///nokia-conf/configure/filter/dhcp6-filter/default-action/action
                choice action {
                    mandatory true;
                    description
                        "The action to take for DHCP6 host creation requests that match this
                         filter entry. If not set host creation proceeds as usual";
                    ///nokia-conf/configure/filter/dhcp6-filter/default-action/action/bypass-host-creation
                    case bypass-host-creation {

                        ///nokia-conf/configure/filter/dhcp6-filter/default-action/action/bypass-host-creation/bypass-host-creation
                        container bypass-host-creation {
                            presence "Enable the bypass-host-creation context";
                            description "Enable the bypass-host-creation context";

                            ///nokia-conf/configure/filter/dhcp6-filter/default-action/action/bypass-host-creation/bypass-host-creation/na
                            leaf na {
                                type boolean;
                                default "true";
                                description "Bypass the DHCPv6 NA host creation";
                            }

                            ///nokia-conf/configure/filter/dhcp6-filter/default-action/action/bypass-host-creation/bypass-host-creation/pd
                            leaf pd {
                                type boolean;
                                default "true";
                                description "Bypass the DHCPv6 PD host creation";
                            }

                        } // container bypass-host-creation

                    }
                    ///nokia-conf/configure/filter/dhcp6-filter/default-action/action/drop
                    case drop {

                        ///nokia-conf/configure/filter/dhcp6-filter/default-action/action/drop/drop
                        leaf drop {
                            type empty;
                            description "Drop DHCPv6 message (do not process)";
                        }

                    }
                }
            } // container default-action

            ///nokia-conf/configure/filter/dhcp6-filter/entry
            list entry {
                key "entry-id";
                max-elements 10;
                description "Enter the entry list instance";

                ///nokia-conf/configure/filter/dhcp6-filter/entry/entry-id
                leaf entry-id {
                    type uint32 {
                        range "1..65535";
                    }
                    description "DHCP filter entry ID";
                }

                ///nokia-conf/configure/filter/dhcp6-filter/entry/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/filter/dhcp6-filter/entry/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

                ///nokia-conf/configure/filter/dhcp6-filter/entry/action
                container action {
                    presence "Enable the action context";
                    description "Enable the action context";

                    ///nokia-conf/configure/filter/dhcp6-filter/entry/action/action
                    choice action {
                        mandatory true;
                        description
                            "The action to take for DHCP6 host creation requests that match this
                             filter entry. If not set host creation proceeds as usual";
                        ///nokia-conf/configure/filter/dhcp6-filter/entry/action/action/bypass-host-creation
                        case bypass-host-creation {

                            ///nokia-conf/configure/filter/dhcp6-filter/entry/action/action/bypass-host-creation/bypass-host-creation
                            container bypass-host-creation {
                                presence "Enable the bypass-host-creation context";
                                description "Enable the bypass-host-creation context";

                                ///nokia-conf/configure/filter/dhcp6-filter/entry/action/action/bypass-host-creation/bypass-host-creation/na
                                leaf na {
                                    type boolean;
                                    default "true";
                                    description "Bypass the DHCPv6 NA host creation";
                                }

                                ///nokia-conf/configure/filter/dhcp6-filter/entry/action/action/bypass-host-creation/bypass-host-creation/pd
                                leaf pd {
                                    type boolean;
                                    default "true";
                                    description "Bypass the DHCPv6 PD host creation";
                                }

                            } // container bypass-host-creation

                        }
                        ///nokia-conf/configure/filter/dhcp6-filter/entry/action/action/drop
                        case drop {

                            ///nokia-conf/configure/filter/dhcp6-filter/entry/action/action/drop/drop
                            leaf drop {
                                type empty;
                                description "Drop DHCPv6 message (do not process)";
                            }

                        }
                    }
                } // container action

                ///nokia-conf/configure/filter/dhcp6-filter/entry/option
                container option {
                    presence "Enable the option context";
                    description "Enable the option context";

                    ///nokia-conf/configure/filter/dhcp6-filter/entry/option/number
                    leaf number {
                        type int32 {
                            range "0..255";
                        }
                        mandatory true;
                        description "Number for DHCP or DHCPv6 option to filter on";
                    }

                    ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match
                    choice option-match {
                        mandatory true;
                        ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/present
                        case present {

                            ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/present/present
                            leaf present {
                                type empty;
                                description "Require the presence of related option";
                            }

                        }
                        ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/absent
                        case absent {

                            ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/absent/absent
                            leaf absent {
                                type empty;
                                description "Require the absence of related option";
                            }

                        }
                        ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match
                        case match {

                            ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match/match
                            container match {
                                presence "Enable the match context";
                                description "Enable the match context";

                                ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match/match/exact
                                leaf exact {
                                    type boolean;
                                    default "false";
                                    description "Use an exact match pattern (not partial)";
                                }

                                ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match/match/invert
                                leaf invert {
                                    type boolean;
                                    default "false";
                                    description "Invert (partial) matching criteria";
                                }

                                ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match/match/option-value
                                choice option-value {
                                    mandatory true;
                                    ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match/match/option-value/string
                                    case string {

                                        ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match/match/option-value/string/string
                                        leaf string {
                                            type string {
                                                length "1..127";
                                            }
                                            description "Matching pattern for the filtered option";
                                        }

                                    }
                                    ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match/match/option-value/hex
                                    case hex {

                                        ///nokia-conf/configure/filter/dhcp6-filter/entry/option/option-match/match/match/option-value/hex/hex
                                        leaf hex {
                                            type string {
                                                length "1..256";
                                                pattern "0x[0-9a-fA-F]+";
                                            }
                                            description "Matching pattern for the filtered option";
                                        }

                                    }
                                }
                            } // container match

                        }
                    }
                } // container option

            } // list entry

        } // list dhcp6-filter

    } // grouping conf-filter-dhcp-dhcp6-filter

}
