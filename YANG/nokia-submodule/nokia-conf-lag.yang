submodule nokia-conf-lag {

    yang-version "1.1";

    belongs-to nokia-conf { prefix "conf"; }

    import ietf-yang-types                { prefix "yang"; }
    import nokia-sros-yang-extensions     { prefix "sros-ext"; }
    import nokia-types-eth-cfm            { prefix "types-eth-cfm"; }
    import nokia-types-port               { prefix "types-port"; }
    import nokia-types-services           { prefix "types-services"; }
    import nokia-types-sros               { prefix "types-sros"; }

    include nokia-conf-eth-cfm;
    include nokia-conf-groups;
    include nokia-conf-port;
    include nokia-conf-qos;
    include nokia-conf-service;

    sros-ext:sros-major-release "rel23";
    organization "Nokia";
    contact
        "Nokia SR OS Support
         Web: <http://www.nokia.com>";
    description
        "Nokia YANG Data model to configure link aggregation group on SR OS based routers.

         Copyright 2016 Nokia. All rights reserved. Reproduction of this document
         is authorized on the condition that the foregoing copyright notice is included.

         This nokia-conf-lag YANG module embodies Nokia's proprietary
         intellectual property. Nokia retains all title and ownership in the
         specification, including any revisions.

         Nokia grants all interested parties a non-exclusive license to use
         and distribute an unmodified copy of this specification in connection with
         management of Nokia products, and without fee, provided this
         copyright notice and license appear on all copies.

         This specification is supplied `as is', and Nokia makes no warranty,
         either express or implied, as to the use, operation, condition, or performance
         of the specification.";
    revision "2023-05-16";

    grouping conf-lag {
        ///nokia-conf/configure/lag
        list lag {
            key "lag-name";
            description "Enter the lag list instance";

            ///nokia-conf/configure/lag/lag-name
            leaf lag-name {
                type types-sros:lag-interface;
                description "LAG name";
            }

            ///nokia-conf/configure/lag/encap-type
            leaf encap-type {
                type enumeration {
                    enum null                           { value 1; }
                    enum dot1q                          { value 2; }
                    enum qinq                           { value 10; }
                }
                sros-ext:immutable;
                sros-ext:auto-restart-to-modify;
                description "Encapsulation type";
            }

            ///nokia-conf/configure/lag/mac-address
            leaf mac-address {
                type yang:mac-address;
                default "00:00:00:00:00:00";
                description "MAC address of the LAG";
            }

            ///nokia-conf/configure/lag/mode
            leaf mode {
                type types-port:mode;
                sros-ext:immutable;
                sros-ext:auto-restart-to-modify;
                default "network";
                description "Operation mode of the LAG";
            }

            ///nokia-conf/configure/lag/description
            leaf description {
                type types-sros:very-long-description;
                description "Text description";
            }

            ///nokia-conf/configure/lag/admin-state
            leaf admin-state {
                type types-sros:admin-state;
                default "disable";
                description "Administrative state of the LAG";
            }

            ///nokia-conf/configure/lag/dynamic-cost
            leaf dynamic-cost {
                type boolean;
                default "false";
                description "Allow LAG costing using operational aggregate bandwidth";
            }

            ///nokia-conf/configure/lag/lacp-xmit-interval
            leaf lacp-xmit-interval {
                type enumeration {
                    enum slow                           { value 1; }
                    enum fast                           { value 2; }
                }
                default "fast";
                description "Time for periodic transmission";
            }

            ///nokia-conf/configure/lag/lacp-xmit-stdby
            leaf lacp-xmit-stdby {
                type boolean;
                default "true";
                description "Allow LACP message transmission on standby links";
            }

            ///nokia-conf/configure/lag/standby-signaling
            leaf standby-signaling {
                type enumeration {
                    enum lacp                           { value 1; }
                    enum power-off                      { value 2; }
                }
                default "lacp";
                description "Way of signaling a member port to the remote side";
            }

            ///nokia-conf/configure/lag/hold-time-down
            leaf hold-time-down {
                type uint32 {
                    range "1..2000";
                }
                units "deciseconds";
                description "Delay time for reporting the LAG is down";
            }

            ///nokia-conf/configure/lag/port-type
            leaf port-type {
                type enumeration {
                    enum standard                       { value 1; }
                    enum hs                             { value 4; }
                    enum hsmda                          { status obsolete; }
                }
                default "standard";
                description "Port type of the LAG";
            }

            ///nokia-conf/configure/lag/port-weight-speed
            leaf port-weight-speed {
                status obsolete;
                type uint32 {
                    range "1|10";
                }
                units "gigabps";
                description "Speed corresponding to a port weight unit";
            }

            ///nokia-conf/configure/lag/lacp-mux-control
            leaf lacp-mux-control {
                type enumeration {
                    enum coupled                        { value 1; }
                    enum independent                    { value 2; }
                }
                sros-ext:auto-restart-to-modify;
                default "coupled";
                description "MUX machine control for LACP LAG in active/passive mode";
            }

            ///nokia-conf/configure/lag/monitor-oper-group
            leaf monitor-oper-group {
                type leafref {
                    path "../../service/oper-group/name";
                }
                description "Operational group to monitor";
            }

            ///nokia-conf/configure/lag/max-ports
            leaf max-ports {
                type uint32 {
                    range "32|64";
                }
                sros-ext:immutable;
                description "Maximum number of ports allowed in the LAG";
            }

            ///nokia-conf/configure/lag/lag-bundle-pool
            leaf lag-bundle-pool {
                type uint32 {
                    range "1..2";
                }
                sros-ext:immutable;
                default "1";
                description "LAG bundle pool to be dimensioned";
            }

            ///nokia-conf/configure/lag/apply-groups
            leaf-list apply-groups {
                type leafref {
                    path "../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Apply a configuration group at this level";
            }

            ///nokia-conf/configure/lag/apply-groups-exclude
            leaf-list apply-groups-exclude {
                type leafref {
                    path "../../groups/group/name";
                }
                max-elements 8;
                ordered-by user;
                description "Exclude a configuration group at this level";
            }

            ///nokia-conf/configure/lag/port-threshold
            container port-threshold {
                description "Enter the port-threshold context";

                ///nokia-conf/configure/lag/port-threshold/value
                leaf value {
                    type int32 {
                        range "0..63";
                    }
                    description "Active link threshold at which action is taken";
                }

                ///nokia-conf/configure/lag/port-threshold/action
                leaf action {
                    type enumeration {
                        enum down                           { value 1; }
                        enum dynamic-cost                   { value 2; }
                        enum static-cost                    { value 3; }
                    }
                    default "down";
                    description "Action when the active links are at or below threshold";
                }

                ///nokia-conf/configure/lag/port-threshold/cost
                leaf cost {
                    type uint32 {
                        range "1..16777215";
                    }
                    description "Static cost of the LAG";
                }

            } // container port-threshold

            ///nokia-conf/configure/lag/lacp
            container lacp {
                presence "Enable the lacp context";
                description "Enable the lacp context";

                ///nokia-conf/configure/lag/lacp/mode
                leaf mode {
                    type enumeration {
                        enum passive                        { value 1; }
                        enum active                         { value 2; }
                    }
                    default "passive";
                    description "Mode in which LACP operates";
                }

                ///nokia-conf/configure/lag/lacp/system-id
                leaf system-id {
                    type yang:mac-address;
                    default "00:00:00:00:00:00";
                    description "System ID";
                }

                ///nokia-conf/configure/lag/lacp/system-priority
                leaf system-priority {
                    type int32 {
                        range "0..65535";
                    }
                    description "System priority value";
                }

                ///nokia-conf/configure/lag/lacp/administrative-key
                leaf administrative-key {
                    type int32 {
                        range "1..65535";
                    }
                    mandatory true;
                    description "Key to identify the channel group on each LACP port";
                }

            } // container lacp

            ///nokia-conf/configure/lag/adaptive-load-balancing
            container adaptive-load-balancing {
                presence "Enable the adaptive-load-balancing context";
                description "Enable the adaptive-load-balancing context";

                ///nokia-conf/configure/lag/adaptive-load-balancing/tolerance
                leaf tolerance {
                    type types-sros:percent {
                        range "1..100";
                    }
                    default "20";
                    description "Threshold that triggers link utilization optimization";
                }

                ///nokia-conf/configure/lag/adaptive-load-balancing/interval
                leaf interval {
                    type uint32 {
                        range "15|30|60|120";
                    }
                    units "seconds";
                    default "30";
                    description "The statistics pooling interval for the LAG ports";
                }

                ///nokia-conf/configure/lag/adaptive-load-balancing/bandwidth-threshold
                leaf bandwidth-threshold {
                    type int32 {
                        range "0..100";
                    }
                    units "percent";
                    description "Minimum bandwidth for adaptive load balancing";
                }

            } // container adaptive-load-balancing

            ///nokia-conf/configure/lag/access
            container access {
                when "../mode = 'access' or ../mode = 'hybrid'" {
                    description "node is only valid for access and hybrid lags";
                }
                description "Enter the access context";

                ///nokia-conf/configure/lag/access/bandwidth
                leaf bandwidth {
                    type uint64 {
                        range "1..6400000000";
                    }
                    units "bps";
                    description "Administrative bandwidth applied to this LAG";
                }

                ///nokia-conf/configure/lag/access/booking-factor
                leaf booking-factor {
                    type uint32 {
                        range "1..1000";
                    }
                    default "100";
                    description "Booking factor against the administrative bandwidth";
                }

                ///nokia-conf/configure/lag/access/per-fp-ing-queuing
                leaf per-fp-ing-queuing {
                    type boolean;
                    default "false";
                    description "Enable ingress queuing per forwarding port";
                }

                ///nokia-conf/configure/lag/access/per-fp-egr-queuing
                leaf per-fp-egr-queuing {
                    type boolean;
                    default "false";
                    description "Per FP egress queuing";
                }

                ///nokia-conf/configure/lag/access/per-fp-sap-instance
                leaf per-fp-sap-instance {
                    type boolean;
                    default "false";
                    description "SAP instance allocation on a LAG";
                }

                ///nokia-conf/configure/lag/access/adapt-qos
                container adapt-qos {
                    description "Enter the adapt-qos context";

                    ///nokia-conf/configure/lag/access/adapt-qos/mode
                    leaf mode {
                        type enumeration {
                            enum link                           { value 1; }
                            enum distribute                     { value 2; }
                            enum port-fair                      { value 3; }
                        }
                        description "QoS adaptation mode";
                    }

                    ///nokia-conf/configure/lag/access/adapt-qos/include-egr-hash-cfg
                    leaf include-egr-hash-cfg {
                        type boolean;
                        default "false";
                        description "Factor egress hashing into buffer and rate distribution";
                    }

                } // container adapt-qos

            } // container access

            ///nokia-conf/configure/lag/selection-criteria
            container selection-criteria {
                description "Enter the selection-criteria context";

                ///nokia-conf/configure/lag/selection-criteria/mode
                leaf mode {
                    type enumeration {
                        enum highest-count                  { value 1; }
                        enum highest-weight                 { value 2; }
                        enum best-port                      { value 3; }
                    }
                    default "highest-count";
                    description "Criteria to select the active subgroup";
                }

                ///nokia-conf/configure/lag/selection-criteria/slave-to-partner
                leaf slave-to-partner {
                    type boolean;
                    default "false";
                    description "Use slave-to-partner for selection criteria";
                }

                ///nokia-conf/configure/lag/selection-criteria/subgroup-hold-time
                leaf subgroup-hold-time {
                    type union {
                        type int32 {
                            range "0..2000";
                        }
                        type enumeration {
                            enum infinite                       { value -1; }
                        }
                    }
                    units "deciseconds";
                    default "0";
                    description "Delay time when switching to a new active subgroup";
                }

            } // container selection-criteria

            ///nokia-conf/configure/lag/per-link-hash
            container per-link-hash {
                presence "Enable the per-link-hash context";
                description "Enable the per-link-hash context";

                ///nokia-conf/configure/lag/per-link-hash/weighted
                container weighted {
                    presence "Enable the weighted context";
                    description "Enable the weighted context";

                    ///nokia-conf/configure/lag/per-link-hash/weighted/auto-rebalance
                    leaf auto-rebalance {
                        type boolean;
                        default "false";
                        description "Auto-rebalance SAPs, users, or interfaces for new links";
                    }

                    ///nokia-conf/configure/lag/per-link-hash/weighted/subscriber-hash-mode
                    leaf subscriber-hash-mode {
                        type enumeration {
                            enum sap                            { value 1; }
                            enum vport                          { value 2; }
                        }
                        default "sap";
                        description "Subscriber traffic load balance over LAG member links";
                    }

                } // container weighted

            } // container per-link-hash

            ///nokia-conf/configure/lag/weight-threshold
            container weight-threshold {
                status obsolete;
                description "Enter the weight-threshold context";

                ///nokia-conf/configure/lag/weight-threshold/value
                leaf value {
                    status obsolete;
                    type int32 {
                        range "0..63";
                    }
                    description "Active link threshold at which action is taken";
                }

                ///nokia-conf/configure/lag/weight-threshold/action
                leaf action {
                    status obsolete;
                    type enumeration {
                        enum down                           { value 1; }
                        enum dynamic-cost                   { value 2; }
                        enum static-cost                    { value 3; }
                    }
                    default "down";
                    description "Action to take if the number of active links in the LAG is at or below the threshold value";
                }

                ///nokia-conf/configure/lag/weight-threshold/cost
                leaf cost {
                    status obsolete;
                    type uint32 {
                        range "1..16777215";
                    }
                    description "Static cost of the LAG";
                }

            } // container weight-threshold

            ///nokia-conf/configure/lag/hash-weight-threshold
            container hash-weight-threshold {
                description "Enter the hash-weight-threshold context";

                ///nokia-conf/configure/lag/hash-weight-threshold/value
                leaf value {
                    type int32 {
                        range "1..6400000";
                    }
                    description "Sum of the hash weight values of all active LAG ports";
                }

                ///nokia-conf/configure/lag/hash-weight-threshold/action
                leaf action {
                    type enumeration {
                        enum down                           { value 1; }
                        enum dynamic-cost                   { value 2; }
                        enum static-cost                    { value 3; }
                    }
                    default "down";
                    description "Action when the sum of the hash weight is not exceeded";
                }

                ///nokia-conf/configure/lag/hash-weight-threshold/cost
                leaf cost {
                    type uint32 {
                        range "1..16777215";
                    }
                    description "Static cost of the LAG";
                }

            } // container hash-weight-threshold

            ///nokia-conf/configure/lag/bfd-liveness
            container bfd-liveness {
                description "Enter the bfd-liveness context";

                ///nokia-conf/configure/lag/bfd-liveness/soft-reset-extension
                leaf soft-reset-extension {
                    type boolean;
                    default "true";
                    description "Extend BFD timers during soft reset";
                }

                ///nokia-conf/configure/lag/bfd-liveness/ipv4
                container ipv4 {
                    description "Enable the ipv4 context";

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/bfd-on-distributing-only
                    leaf bfd-on-distributing-only {
                        type boolean;
                        default "false";
                        description "Restrict micro-BFD sessions to LACP state distributing";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/max-admin-down-time
                    leaf max-admin-down-time {
                        type union {
                            type int32 {
                                range "0..3600";
                            }
                            type enumeration {
                                enum infinite                       { value -1; }
                            }
                        }
                        units "seconds";
                        default "0";
                        description "Maximum time to forward traffic after micro-BFD is down";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/max-setup-time
                    leaf max-setup-time {
                        type union {
                            type int32 {
                                range "0..60000";
                            }
                            type enumeration {
                                enum infinite                       { value -1; }
                            }
                        }
                        units "milliseconds";
                        default "infinite";
                        description "Maximum time to forward traffic during micro-BFD setup";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/multiplier
                    leaf multiplier {
                        type uint32 {
                            range "3..20";
                        }
                        default "3";
                        description "Interval multiplier to detect BFD packets not received";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/receive-interval
                    leaf receive-interval {
                        type uint32 {
                            range "10..100000";
                        }
                        units "milliseconds";
                        default "100";
                        description "Receive timer for micro-BFD session over the LAG links";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/admin-state
                    leaf admin-state {
                        type types-sros:admin-state;
                        default "disable";
                        description "Administrative state of micro-BFD session for IP family";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/transmit-interval
                    leaf transmit-interval {
                        type uint32 {
                            range "10..100000";
                        }
                        units "milliseconds";
                        default "100";
                        description "Transmit timer for micro-BFD session over the LAG links";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/local-ip-address
                    leaf local-ip-address {
                        type types-sros:ipv4-unicast-address;
                        description "BFD source address";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/remote-ip-address
                    leaf remote-ip-address {
                        type types-sros:ipv4-unicast-address;
                        description "BFD destination address";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/apply-groups
                    leaf-list apply-groups {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Apply a configuration group at this level";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv4/apply-groups-exclude
                    leaf-list apply-groups-exclude {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Exclude a configuration group at this level";
                    }

                } // container ipv4

                ///nokia-conf/configure/lag/bfd-liveness/ipv6
                container ipv6 {
                    description "Enter the ipv6 context";

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/bfd-on-distributing-only
                    leaf bfd-on-distributing-only {
                        type boolean;
                        default "false";
                        description "Restrict micro-BFD sessions to LACP state distributing";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/max-admin-down-time
                    leaf max-admin-down-time {
                        type union {
                            type int32 {
                                range "0..3600";
                            }
                            type enumeration {
                                enum infinite                       { value -1; }
                            }
                        }
                        units "seconds";
                        default "0";
                        description "Maximum time to forward traffic after micro-BFD is down";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/max-setup-time
                    leaf max-setup-time {
                        type union {
                            type int32 {
                                range "0..60000";
                            }
                            type enumeration {
                                enum infinite                       { value -1; }
                            }
                        }
                        units "milliseconds";
                        default "infinite";
                        description "Maximum time to forward traffic during micro-BFD setup";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/multiplier
                    leaf multiplier {
                        type uint32 {
                            range "3..20";
                        }
                        default "3";
                        description "Interval multiplier to detect BFD packets not received";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/receive-interval
                    leaf receive-interval {
                        type uint32 {
                            range "10..100000";
                        }
                        units "milliseconds";
                        default "100";
                        description "Receive timer for micro-BFD session over the LAG links";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/admin-state
                    leaf admin-state {
                        type types-sros:admin-state;
                        default "disable";
                        description "Administrative state of micro-BFD session for IP family";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/transmit-interval
                    leaf transmit-interval {
                        type uint32 {
                            range "10..100000";
                        }
                        units "milliseconds";
                        default "100";
                        description "Transmit timer for micro-BFD session over the LAG links";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/local-ip-address
                    leaf local-ip-address {
                        type types-sros:ipv6-unicast-or-linklocal-address;
                        description "BFD source address";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/remote-ip-address
                    leaf remote-ip-address {
                        type types-sros:ipv6-unicast-or-linklocal-address;
                        description "BFD destination address";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/apply-groups
                    leaf-list apply-groups {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Apply a configuration group at this level";
                    }

                    ///nokia-conf/configure/lag/bfd-liveness/ipv6/apply-groups-exclude
                    leaf-list apply-groups-exclude {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Exclude a configuration group at this level";
                    }

                } // container ipv6

            } // container bfd-liveness

            ///nokia-conf/configure/lag/eth-cfm
            container eth-cfm {
                description "Enter the eth-cfm context";

                ///nokia-conf/configure/lag/eth-cfm/mep
                list mep {
                    key "md-admin-name ma-admin-name mep-id";
                    description "Enter the mep list instance";

                    ///nokia-conf/configure/lag/eth-cfm/mep/md-admin-name
                    leaf md-admin-name {
                        type leafref {
                            path "../../../../eth-cfm/domain/md-admin-name";
                        }
                        description "Maintenance Domain (MD) name";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/ma-admin-name
                    leaf ma-admin-name {
                        type leafref {
                            path "../../../../eth-cfm/domain[md-admin-name=current()/../md-admin-name]/association/ma-admin-name";
                        }
                        description "Maintenance Association (MA) name";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/mep-id
                    leaf mep-id {
                        type types-eth-cfm:mep-id-type;
                        description "Maintenance Endpoint (MEP) ID";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/vlan
                    leaf vlan {
                        type types-eth-cfm:vlan-id-or-none;
                        sros-ext:immutable;
                        default "none";
                        description "Outer VLAN ID of the tunnel";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/admin-state
                    leaf admin-state {
                        type types-sros:admin-state;
                        default "disable";
                        description "Administrative state of the MEP";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/description
                    leaf description {
                        type types-sros:description;
                        description "Text description";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/mac-address
                    leaf mac-address {
                        type types-sros:mac-unicast-address-no-zero;
                        description "MAC address of the MEP";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/low-priority-defect
                    leaf low-priority-defect {
                        type types-eth-cfm:lowest-alarm-priority;
                        default "mac-rem-err-xcon";
                        description "Lowest priority defect allowed to generate fault alarm";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/ccm
                    leaf ccm {
                        type boolean;
                        default "false";
                        description "Generate CCM messages";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/ccm-ltm-priority
                    leaf ccm-ltm-priority {
                        type types-eth-cfm:frame-priority;
                        default "7";
                        description "Priority of CCM and LTM messages transmitted by the MEP";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/ccm-padding-size
                    leaf ccm-padding-size {
                        type uint32 {
                            range "3..1500";
                        }
                        description "Number of octets of padding to insert in CCM packets";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/one-way-delay-threshold
                    leaf one-way-delay-threshold {
                        type uint32 {
                            range "0..600";
                        }
                        units "seconds";
                        default "3";
                        description "Threshold time limit for the one-way delay test";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/collect-lmm-stats
                    leaf collect-lmm-stats {
                        type boolean;
                        default "false";
                        description "Collect statistics for loss measurement message tests";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/facility-fault
                    leaf facility-fault {
                        type boolean;
                        default "false";
                        description "Allow the facility MEP to generate a network action";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/ccm-tlv-ignore
                    leaf-list ccm-tlv-ignore {
                        type types-eth-cfm:ccm-tlv-ignore-type;
                        max-elements 2;
                        description "TLV to ignore on reception";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/apply-groups
                    leaf-list apply-groups {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Apply a configuration group at this level";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/apply-groups-exclude
                    leaf-list apply-groups-exclude {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Exclude a configuration group at this level";
                    }

                    ///nokia-conf/configure/lag/eth-cfm/mep/alarm-notification
                    container alarm-notification {
                        description "Enter the alarm-notification context";

                        ///nokia-conf/configure/lag/eth-cfm/mep/alarm-notification/fng-alarm-time
                        leaf fng-alarm-time {
                            type int32 {
                                range "250|500|1000";
                            }
                            units "centiseconds";
                            description "Time that must expire before an FNG alarm is raised";
                        }

                        ///nokia-conf/configure/lag/eth-cfm/mep/alarm-notification/fng-reset-time
                        leaf fng-reset-time {
                            type int32 {
                                range "250|500|1000";
                            }
                            units "centiseconds";
                            description "Time that must expire before an FNG alarm is reset";
                        }

                    } // container alarm-notification

                    ///nokia-conf/configure/lag/eth-cfm/mep/ais
                    container ais {
                        presence "Enable the ais context";
                        description "Enable the ais context";

                        ///nokia-conf/configure/lag/eth-cfm/mep/ais/client-meg-level
                        leaf-list client-meg-level {
                            type uint32 {
                                range "1..7";
                            }
                            max-elements 7;
                            description "Client MEG level for AIS message generation";
                        }

                        ///nokia-conf/configure/lag/eth-cfm/mep/ais/interface-support
                        leaf interface-support {
                            type boolean;
                            default "false";
                            description "Enable generation of AIS PDUs based on endpoint state";
                        }

                        ///nokia-conf/configure/lag/eth-cfm/mep/ais/interval
                        leaf interval {
                            type uint32 {
                                range "1|60";
                            }
                            units "seconds";
                            default "1";
                            description "Transmission interval for AIS messages";
                        }

                        ///nokia-conf/configure/lag/eth-cfm/mep/ais/low-priority-defect
                        leaf low-priority-defect {
                            type enumeration {
                                enum all-def                        { value 1; }
                                enum mac-rem-err-xcon               { value 2; }
                            }
                            default "all-def";
                            description "Lowest priority defect allowed to generate fault alarm";
                        }

                        ///nokia-conf/configure/lag/eth-cfm/mep/ais/priority
                        leaf priority {
                            type types-eth-cfm:frame-priority;
                            default "7";
                            description "Priority of the AIS messages generated by the node";
                        }

                    } // container ais

                    ///nokia-conf/configure/lag/eth-cfm/mep/csf
                    container csf {
                        presence "Enable the csf context";
                        description "Enable the csf context";

                        ///nokia-conf/configure/lag/eth-cfm/mep/csf/multiplier
                        leaf multiplier {
                            type decimal64 {
                                range "0.0|2.0..30.0";
                                fraction-digits 1;
                            }
                            default "3.5";
                            description "Multiplication factor used to clear the CSF condition";
                        }

                    } // container csf

                    ///nokia-conf/configure/lag/eth-cfm/mep/eth-test
                    container eth-test {
                        presence "Enable the eth-test context";
                        description "Enable the eth-test context";

                        ///nokia-conf/configure/lag/eth-cfm/mep/eth-test/bit-error-threshold
                        leaf bit-error-threshold {
                            type uint32 {
                                range "0..11840";
                            }
                            units "bit errors";
                            default "1";
                            description "Lowest priority defect allowed to generate fault alarm";
                        }

                        ///nokia-conf/configure/lag/eth-cfm/mep/eth-test/test-pattern
                        container test-pattern {
                            description "Enter the test-pattern context";

                            ///nokia-conf/configure/lag/eth-cfm/mep/eth-test/test-pattern/pattern
                            leaf pattern {
                                type enumeration {
                                    enum all-zeros                      { value 0; }
                                    enum all-ones                       { value 1; }
                                }
                                default "all-zeros";
                                description "Test pattern for Ethernet Test frames";
                            }

                            ///nokia-conf/configure/lag/eth-cfm/mep/eth-test/test-pattern/crc-tlv
                            leaf crc-tlv {
                                type boolean;
                                default "false";
                                description "Generate a CRC checksum";
                            }

                        } // container test-pattern

                    } // container eth-test

                    ///nokia-conf/configure/lag/eth-cfm/mep/grace
                    container grace {
                        description "Enter the grace context";

                        ///nokia-conf/configure/lag/eth-cfm/mep/grace/eth-ed
                        container eth-ed {
                            description "Enter the eth-ed context";

                            ///nokia-conf/configure/lag/eth-cfm/mep/grace/eth-ed/max-rx-defect-window
                            leaf max-rx-defect-window {
                                type uint32 {
                                    range "1..86400";
                                }
                                units "seconds";
                                description "Maximum received ETH-ED expected defect window duration";
                            }

                            ///nokia-conf/configure/lag/eth-cfm/mep/grace/eth-ed/priority
                            leaf priority {
                                type int32 {
                                    range "0..7";
                                }
                                description "Transmission priority for ETH-ED PDUs";
                            }

                            ///nokia-conf/configure/lag/eth-cfm/mep/grace/eth-ed/rx-eth-ed
                            leaf rx-eth-ed {
                                type boolean;
                                default "true";
                                description "Receive and process ETH-ED ITU-T Y.1731 PDUs on the MEP";
                            }

                            ///nokia-conf/configure/lag/eth-cfm/mep/grace/eth-ed/tx-eth-ed
                            leaf tx-eth-ed {
                                type boolean;
                                default "false";
                                description "Transmit ETH-ED PDUs from the MEP";
                            }

                        } // container eth-ed

                        ///nokia-conf/configure/lag/eth-cfm/mep/grace/eth-vsm-grace
                        container eth-vsm-grace {
                            description "Enter the eth-vsm-grace context";

                            ///nokia-conf/configure/lag/eth-cfm/mep/grace/eth-vsm-grace/rx-eth-vsm-grace
                            leaf rx-eth-vsm-grace {
                                type boolean;
                                default "true";
                                description "Receive and process Nokia ETH-CFM Grace PDU on the MEP";
                            }

                            ///nokia-conf/configure/lag/eth-cfm/mep/grace/eth-vsm-grace/tx-eth-vsm-grace
                            leaf tx-eth-vsm-grace {
                                type boolean;
                                default "true";
                                description "Transmit ETH-ED PDUs from the MEP";
                            }

                        } // container eth-vsm-grace

                    } // container grace

                } // list mep

            } // container eth-cfm

            ///nokia-conf/configure/lag/port
            list port {
                key "port-id";
                description "Enter the port list instance";

                ///nokia-conf/configure/lag/port/port-id
                leaf port-id {
                    type leafref {
                        path "../../../port/port-id";
                    }
                    description "Identifier to uniquely identify the port in the LAG";
                }

                ///nokia-conf/configure/lag/port/priority
                leaf priority {
                    type uint32 {
                        range "1..65535";
                    }
                    default "32768";
                    description "Priority of the port in the LAG";
                }

                ///nokia-conf/configure/lag/port/sub-group
                leaf sub-group {
                    type union {
                        type uint32 {
                            range "1..8";
                        }
                        type enumeration {
                            enum auto-iom                       { value -2; }
                            enum auto-mda                       { value -1; }
                        }
                    }
                    sros-ext:immutable;
                    default "1";
                    description "Subgroup of the port in the LAG";
                }

                ///nokia-conf/configure/lag/port/hash-weight
                leaf hash-weight {
                    type union {
                        type uint32 {
                            range "1..100000";
                        }
                        type enumeration {
                            enum port-speed                     { value -1; }
                        }
                    }
                    description "Flow hashing distribution between LAG ports";
                }

                ///nokia-conf/configure/lag/port/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/lag/port/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

            } // list port

            ///nokia-conf/configure/lag/link-map-profile
            list link-map-profile {
                key "link-map-profile-id";
                description "Enter the link-map-profile list instance";

                ///nokia-conf/configure/lag/link-map-profile/link-map-profile-id
                leaf link-map-profile-id {
                    type int32 {
                        range "1..64";
                    }
                    description "Link map profile to control LAG ports";
                }

                ///nokia-conf/configure/lag/link-map-profile/description
                leaf description {
                    type types-sros:description;
                    description "Text description";
                }

                ///nokia-conf/configure/lag/link-map-profile/failure-mode
                leaf failure-mode {
                    type enumeration {
                        enum per-link-hash                  { value 1; }
                        enum discard                        { value 2; }
                    }
                    default "per-link-hash";
                    description "Failure mode of LAG link profile";
                }

                ///nokia-conf/configure/lag/link-map-profile/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/lag/link-map-profile/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

                ///nokia-conf/configure/lag/link-map-profile/link
                list link {
                    key "port-id";
                    description "Enter the link list instance";

                    ///nokia-conf/configure/lag/link-map-profile/link/port-id
                    leaf port-id {
                        type leafref {
                            path "../../../port/port-id";
                        }
                        description "Port associated with the link map profile";
                    }

                    ///nokia-conf/configure/lag/link-map-profile/link/port-type
                    leaf port-type {
                        type enumeration {
                            enum primary                        { value 1; }
                            enum secondary                      { value 2; }
                        }
                        sros-ext:immutable;
                        mandatory true;
                        description "Type of the associated port for this entry";
                    }

                    ///nokia-conf/configure/lag/link-map-profile/link/apply-groups
                    leaf-list apply-groups {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Apply a configuration group at this level";
                    }

                    ///nokia-conf/configure/lag/link-map-profile/link/apply-groups-exclude
                    leaf-list apply-groups-exclude {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Exclude a configuration group at this level";
                    }

                } // list link

            } // list link-map-profile

            ///nokia-conf/configure/lag/scheduler
            container scheduler {
                description "Enable the scheduler context";

                ///nokia-conf/configure/lag/scheduler/mode
                leaf mode {
                    type enumeration {
                        enum vlan-qos                       { value 1; }
                    }
                    description "Mode of the scheduler";
                }

                ///nokia-conf/configure/lag/scheduler/low-latency
                leaf low-latency {
                    type boolean;
                    default "false";
                    description "Enable low-latency mode on the LAG port";
                }

                ///nokia-conf/configure/lag/scheduler/apply-groups
                leaf-list apply-groups {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Apply a configuration group at this level";
                }

                ///nokia-conf/configure/lag/scheduler/apply-groups-exclude
                leaf-list apply-groups-exclude {
                    type leafref {
                        path "../../../groups/group/name";
                    }
                    max-elements 8;
                    ordered-by user;
                    description "Exclude a configuration group at this level";
                }

                ///nokia-conf/configure/lag/scheduler/vlan-qos-policy
                list vlan-qos-policy {
                    when "../mode = 'vlan-qos'" {
                        description "only allowed in vlan-qos mode";
                    }
                    key "policy-name";
                    description "Enter the vlan-qos-policy list instance";

                    ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/policy-name
                    leaf policy-name {
                        type leafref {
                            path "../../../../qos/vlan-qos-policy/vlan-qos-policy-name";
                        }
                        description "VLAN QoS policy name";
                    }

                    ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/apply-groups
                    leaf-list apply-groups {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Apply a configuration group at this level";
                    }

                    ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/apply-groups-exclude
                    leaf-list apply-groups-exclude {
                        type leafref {
                            path "../../../../groups/group/name";
                        }
                        max-elements 8;
                        ordered-by user;
                        description "Exclude a configuration group at this level";
                    }

                    ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate
                    choice egress-queue-agg-rate {
                        default "agg-rate";
                        ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate/agg-rate
                        case agg-rate {

                            ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate/agg-rate/agg-rate
                            container agg-rate {
                                description "Enter the agg-rate context";

                                ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate/agg-rate/agg-rate/rate
                                leaf rate {
                                    type types-services:agg-rate-rate;
                                    units "kilobps";
                                    description "Maximum total rate of all egress queues";
                                }

                                ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate/agg-rate/agg-rate/cir
                                leaf cir {
                                    type union {
                                        type int32 {
                                            range "0..400000000";
                                        }
                                        type enumeration {
                                            enum max                            { value -1; }
                                        }
                                    }
                                    units "kilobps";
                                    default "0";
                                    description "Administrative CIR";
                                }

                            } // container agg-rate

                        }
                        ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate/percent-agg-rate
                        case percent-agg-rate {

                            ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate/percent-agg-rate/percent-agg-rate
                            container percent-agg-rate {
                                description "Enter the percent-agg-rate context";

                                ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate/percent-agg-rate/percent-agg-rate/pir
                                leaf pir {
                                    type decimal64 {
                                        range "0.01..100.00";
                                        fraction-digits 2;
                                    }
                                    description "PIR percent rate";
                                }

                                ///nokia-conf/configure/lag/scheduler/vlan-qos-policy/egress-queue-agg-rate/percent-agg-rate/percent-agg-rate/cir
                                leaf cir {
                                    type decimal64 {
                                        range "0.00..100.00";
                                        fraction-digits 2;
                                    }
                                    description "CIR percent rate";
                                }

                            } // container percent-agg-rate

                        }
                    }
                } // list vlan-qos-policy

            } // container scheduler

        } // list lag

    } // grouping conf-lag

}
